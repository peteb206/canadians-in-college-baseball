name: cbn-scrape-roster-full
on:
   schedule:
      - cron: '0 8 * * 1' # runs at 8:00 UTC on Mondays
   workflow_dispatch:
jobs:
   build:
      runs-on: ubuntu-latest
      steps:
         -  name: checkout repo content
            uses: actions/checkout@v2 # checkout the repository content to github runner
         -  name: setup python
            uses: actions/setup-python@v2
            with:
               python-version: '3.9.12' # install the python version needed
         -  name: install python packages
            run: |
               python -m pip install --upgrade pip
               pip install -r requirements.txt
         -  name: roster scrape python script
            env:
               GOOGLE_CLOUD_API_KEY: ${{ secrets.GOOGLE_CLOUD_API_KEY }}
            run: |
               python -c 'from actions import players; players(fetch = True, update_google_sheet = True, copy_to_production = True)'